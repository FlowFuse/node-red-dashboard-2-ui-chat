(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".nrdb-ui-chat[data-v-87eb5df5]{display:flex;flex-direction:column;background:var(--surface);border-radius:var(--group-border-radius);overflow:hidden;background-color:rgb(var(--v-theme-background))}.nrdb-ui-chat-messages[data-v-87eb5df5]{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:8px;background-color:rgb(var(--v-theme-background))}.nrdb-ui-message[data-v-87eb5df5]{max-width:70%;padding:8px 12px;border-radius:12px;position:relative;word-wrap:break-word}.nrdb-ui-message.received[data-v-87eb5df5]{align-self:flex-start;background-color:#fff;border-bottom-left-radius:4px;box-shadow:-2px 2px 2px #0000001a}.nrdb-ui-message.sent[data-v-87eb5df5]{align-self:flex-end;background-color:rgb(var(--v-theme-primary));color:#fff;border-bottom-right-radius:4px;box-shadow:2px 2px 2px #0000001a}.nrdb-ui-message-author[data-v-87eb5df5]{font-size:.625rem;opacity:.625;text-align:left}.nrdb-ui-message-time[data-v-87eb5df5]{font-size:.625rem;opacity:.625;text-align:right}.nrdb-ui-chat-input[data-v-87eb5df5]{position:relative;display:flex;align-items:center;background:#fff;border-radius:24px;border:1px solid var(--groupOutline, #cccccc);margin:12px}.nrdb-ui-chat-input .nrdb-ui-chat-input-container[data-v-87eb5df5]{display:flex;align-items:center;gap:8px;width:100%}.nrdb-ui-chat-input input[data-v-87eb5df5]{flex:1;padding:12px 48px 12px 16px;border:none;border-radius:24px;outline:none;background:#fff;font-size:14px}.nrdb-ui-chat-input input[data-v-87eb5df5]:focus{box-shadow:0 0 0 2px var(--primary, #0094CE)}.nrdb-ui-chat-input button[data-v-87eb5df5]{position:absolute;right:8px;padding:8px;background:var(--primary, #0094CE);color:#fff;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:opacity .2s,transform .2s}.nrdb-ui-chat-input button[data-v-87eb5df5]:hover:not(:disabled){opacity:.9;transform:scale(1.05)}.nrdb-ui-chat-input button[data-v-87eb5df5]:disabled{opacity:.5;cursor:not-allowed}.nrdb-ui-chat-input button i[data-v-87eb5df5]{font-size:14px}.nrdb-ui-chat-input input[data-v-87eb5df5]:disabled{background:#f5f5f5;cursor:not-allowed}.nrdb-ui-chat-input input:disabled+button[data-v-87eb5df5]{background:#ccc}.nrdb-ui-message-typing[data-v-87eb5df5]{display:flex;gap:4px;align-items:center;align-self:flex-start;padding:4px 0}.nrdb-ui-message-typing-dot[data-v-87eb5df5]{width:6px;height:6px;background:rgb(var(--v-theme-primary));border-radius:50%;opacity:.6;animation:typingBounce-87eb5df5 1.4s infinite}.nrdb-ui-message-typing-dot[data-v-87eb5df5]:nth-child(2){animation-delay:.2s}.nrdb-ui-message-typing-dot[data-v-87eb5df5]:nth-child(3){animation-delay:.4s}@keyframes typingBounce-87eb5df5{0%,60%,to{transform:translateY(0)}30%{transform:translateY(-4px);opacity:1}}")),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(o,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(o=typeof globalThis<"u"?globalThis:o||self,e(o["ui-chat"]={},o.Vue))})(this,function(o,e){"use strict";const d=(t,s)=>{const a=t.__vccOpts||t;for(const[c,i]of s)a[c]=i;return a},l={},p={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function m(t,s){return e.openBlock(),e.createElementBlock("svg",p,s[0]||(s[0]=[e.createElementVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"},null,-1)]))}const h={name:"UIChat",inject:["$socket","$dataTracker"],components:{Airplane:d(l,[["render",m],["__file","/Users/joepavitt/Documents/flowforge/development/nodes/node-red-dashboard-2-ui-chat/ui/components/icons/Airplane.vue"]])},props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){},data(){return{messages:[],newMessage:"",typing:!1}},computed:{},created(){this.$dataTracker(this.id,this.onInput,this.onLoad)},methods:{onInput(t){t.topic==="_typing"?this.typing=!0:t!=null&&t.payload&&(this.typing=!1,this.messages.push({author:t.topic,text:t.payload,time:new Date().toLocaleTimeString(),sent:!1})),this.$nextTick(()=>{this.scrollToBottom()})},onLoad(t){Array.isArray(t==null?void 0:t.payload)&&(this.messages=t.payload.map(s=>({...s,time:new Date(s.timestamp||Date.now()).toLocaleTimeString()})),this.$nextTick(()=>{this.scrollToBottom()}))},send(t){this.$socket.emit("widget-action",this.id,t)},sendMessage(){if(!this.newMessage.trim()||!this.state.enabled)return;const t={author:"user",text:this.newMessage,time:new Date().toLocaleTimeString(),sent:!0};this.messages.push(t),this.send({topic:"user-message",payload:this.newMessage}),this.newMessage="",this.$nextTick(()=>{this.scrollToBottom()})},scrollToBottom(){const t=this.$el.querySelector(".nrdb-ui-chat-messages");t&&(t.scrollTop=t.scrollHeight)}}},g={class:"nrdb-ui-chat"},u={class:"nrdb-ui-chat-messages"},f={key:0,class:"nrdb-ui-message-author"},_={class:"nrdb-ui-message-content"},y={class:"nrdb-ui-message-time"},b={key:0,class:"nrdb-ui-message received"},k={class:"nrdb-ui-chat-input"},w={class:"nrdb-ui-chat-input-container"},V=["disabled"],E=["disabled"];function T(t,s,a,c,i,r){const M=e.resolveComponent("Airplane");return e.openBlock(),e.createElementBlock("div",g,[e.createCommentVNode(" Chat messages container "),e.createElementVNode("div",u,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.messages,(n,N)=>(e.openBlock(),e.createElementBlock("div",{key:N,class:e.normalizeClass(["nrdb-ui-message",n.sent?"sent":"received"])},[a.props.showAuthor&&!n.sent?(e.openBlock(),e.createElementBlock("div",f,e.toDisplayString(n.author),1)):e.createCommentVNode("v-if",!0),e.createElementVNode("div",_,e.toDisplayString(n.text),1),e.createElementVNode("div",y,e.toDisplayString(n.time),1)],2))),128)),i.typing?(e.openBlock(),e.createElementBlock("div",b,s[3]||(s[3]=[e.createElementVNode("div",{class:"nrdb-ui-message-content nrdb-ui-message-typing"},[e.createElementVNode("div",{class:"nrdb-ui-message-typing-dot"}),e.createElementVNode("div",{class:"nrdb-ui-message-typing-dot"}),e.createElementVNode("div",{class:"nrdb-ui-message-typing-dot"})],-1)]))):e.createCommentVNode("v-if",!0)]),e.createCommentVNode(" Message input form "),e.createElementVNode("div",k,[e.createElementVNode("div",w,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=n=>i.newMessage=n),onKeyup:s[1]||(s[1]=e.withKeys((...n)=>r.sendMessage&&r.sendMessage(...n),["enter"])),placeholder:"Type a message...",disabled:!a.state.enabled},null,40,V),[[e.vModelText,i.newMessage]]),e.createElementVNode("button",{onClick:s[2]||(s[2]=(...n)=>r.sendMessage&&r.sendMessage(...n)),class:"nrdb-ui-chat-send",disabled:!a.state.enabled||!i.newMessage.trim()},[e.createVNode(M)],8,E)])])])}const B=d(h,[["render",T],["__scopeId","data-v-87eb5df5"],["__file","/Users/joepavitt/Documents/flowforge/development/nodes/node-red-dashboard-2-ui-chat/ui/components/UIChat.vue"]]);o.UIChat=B,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=ui-chat.umd.js.map
